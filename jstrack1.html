<!DOCTYPE html>
<html lang="en">
<head>

	
	<meta charset="utf-8">
	<!-- <meta name="viewport" content="expenseapp"> -->
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	
	<link rel="stylesheet" href="jsstyle.css">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

	<script defer
	src='https://kit.fontawesome.com/a076d05399.js'>
	</script>
	<!-- <title>Trying Bootstrap</title> -->
</head>
<body>

	<nav class="navbar navbar-dark bg-dark">
		<span class="navbar-brand mb-0 h1">The Xpers</span>
		<span class="navbar-brand mb-0 h1" id="headingTotal"></span>
	</nav>

	<!-- <div class="container-fluid bg-light" style="min-height: 100vh">
		<div class="container">
			<div class="jumbotron mt-4">
				<div class="input-group mb-3">
					<input type="text" class="form control" placeholder="Amount spent" aria-label="Amount spent" aria-describedby="spent in rupee">
					<div class="input-group-append">
						<span class="input-group text" id="spent in rupee"> $ </span>
						
					</div>

					
				</div>
				
				<div class="input-group mb-3">
					<div class="input-group-prepend">
						<span class="input-group-text" id="spent at"> @ </span>
						
					</div>
					<input type="text" class="form-control" placeholder="spent On"aria-label="spent On" aria-describedby="spent at">

					<div class="input-group-append">
						<button class="btn btn-outline-primary" type="button" id="button-addon2">ADD</button>
					</div>

				</div>				
				
			</div>

			<div>
				<ul class="list-group">
					<li class="list-group-item d-flex justify-content-between">
						<div class="d-flex flex-column">
							T-Shirt
							<small class="text-muted">
								March 11, 2020
							</small>
						</div>
						<div>
							<span class="px-5">
								500
							</span>
							<button type="button" class="btn btn-outline-danger btn-sm">
								<i class="fas fa-trash-alt"></i>
							</button>
						</div>
					</li>
					<li class="list-group-item d-flex justify-content-between">
						<div class="d-flex flex-column">
							Movie
							<small class="text-muted">
								Feb 12, 2020
							</small>
						</div>
						<div>
							<span class="px-5">
								1500
							</span>
							<button type="button" class="btn btn-outline-danger btn-sm">
								<i class="fas fa-trash-alt"></i>
							</button>
						</div>
					</li>
				</ul>

			</div>
			
		</div>
		
	</div> -->
	<div class="container-fluid bg-light" style="min-height: 100vh">
		<div class="container">
			
			<!-- <div class="button">  -->
			<div class="jumbotron mt-4">
				<div class="input-group mb-3">
					<input type="text" class="form control"  id="inputAmount" placeholder="Amount spent" aria-label="Amount spent" aria-describedby="spent in rupee">
					<div class="input-group-append">
						<span class="input-group text" id="spent in rupee"> $ </span>
						
					</div>

					
				</div>
				
				<div class="input-group mb-3">
					<div class="input-group-prepend">
						<span class="input-group-text" id="spent at"> @ </span>
						
					</div>
					<input type="text" class="form-control" id="inputDesc" placeholder="spent On"aria-label="spent On" aria-describedby="spent at">

					<div class="input-group-append">
						<button class="btn btn-outline-primary" type="button" id="btnAddExpense">ADD</button>
					</div>

				</div>	
			<!-- <input id="inputAmount" type="text">
			<input id="inputDesc" type="text"> -->
			<!-- <button id="btnAddExpense">+</button> -->
		<!-- 	
			<div id="expenseTable"></div>
		</div> -->
	</div>
	<div>
		<ul class="list-group" id="expenseTable"></ul>
	</div>	

		<script> 
		
			 //get the heading element

			 const headingEl =document.querySelector("#headingTotal");

			 //get the ref to description element

			 const inputDesc =document.querySelector("#inputDesc");

			
			 //ref to input amount
			
			 const inputElement=document.querySelector("#inputAmount");

			 //get ref to table
			 
			 const expenseTableEl = document.querySelector("#expenseTable");
			 
			 //init value of expense at 0
			 
			 let totalExpense=0;


			 //set the heading element to total expense

			 headingEl.textContent = totalExpense;

			 //allexpense at one place
			 const allexpense = [];



			 //onbutton click add inputamount to totalExpense

			 function addExpensetototal()

			 {
			 	const expenseItem = {};


			 	//Read value from input amount

			 	const textAmount=inputElement.value;
			 	
			 	//read desc from inputDesc

			 	const textDesc = inputDesc.value;

			 	  


			 	//convert it to number

			 	const expense=parseInt(textAmount,10);
			 	
			 	//put it in object
			 	expenseItem.desc = textDesc;
			 	expenseItem.amount = expense;
			 	expenseItem.moment = new Date();
			 	
			 	allexpense.push(expenseItem);
			 	
			 	//add that value to total expense

			 	totalExpense=totalExpense+expense;
			 	

			 	// set heading to total expense
			 	
			 	const someText = `Total: ${totalExpense}`
				
				headingEl.textContent = someText;
				renderlist(allExpenses);

				// show the table

				// const data1 = allexpense[0];
				// const data2 = allexpense[1];

				// const data1Text = `: ${data1.amount}:::${data1.desc}`;

				// const data2Text = `: ${data2.amount}:::${data2.desc}`;

				// const tableText = `
				// 	<div>${data1Text}</div>
				// 	<div>${data2Text}</div>`


				// const allExpensesHTML = allexpense.map(expense => createlistitem(expense));
					
				// 	//return `<div> ${expense.amount} :: ${expense.desc}</div>`});

				// const joinedAllExpenseHTML = allExpensesHTML.join("");
				
				//  expenseTableEl.innerHTML=joinedAllExpenseHTML ; 

			}




		//Get the button element 

		const element = document.querySelector("#btnAddExpense");
		
		//Listen to click event

		element.addEventListener("click",addExpensetototal, false);

		//Controller functions

		//Gedt date string

		function getdateString(momento){

		return	momento.toLocaleDateString
			('en-US', 
				{year: 'numeric',
					month:'long', 
						day:'numeric'
			});
		}

		//Delete items
		function deleteItem(dateValue){


			const newArr = allExpenses.filter(expense => expense.moment.valueOf() !==dateValue)
			renderlist(newArr);

		}


		//VIEW LAYER

		function renderlist(arrOflist){
			const allExpensesHTML = arrOflist.map(expense => createlistitem(expense));
			const joinedAllExpenseHTML = allExpensesHTML.join('');
				
				 expenseTableEl.innerHTML=joinedAllExpenseHTML ;  
		}

		function createlistitem({ desc, amount, moment}) {

			return `
					<li class="list-group-item d-flex justify-content-between">
						<div class="d-flex flex-column">
							${desc}
							<small class="text-muted">
								
								${getdateString(moment)})</small>
						</div>
						<div>
							<span class="px-5">
								${amount}
							</span>
							<button type="button" 
									class="btn btn-outline-danger btn-sm"
									onclick="deleteItem(${moment.valueOf()})";
									>
								<i class='fas fa-trash' style='font-size:24px'></i>
							</button>
						</div>
					</li>
					`;
				};				
		
		



		

	</script>
	</div> 
	
</body>
</html>